{"ast":null,"code":"var _jsxFileName = \"/Users/fjpu/Code/frontend-postApp/src/containers/Home/FollowSection/FollowSection.component.tsx\";\nimport React, { useState, useEffect, useContext, useCallback } from 'react';\nimport ProfileCard from '../../../components/ProfileCard';\nimport styles from './FollowSection.module.scss';\nimport * as userEndpoints from '../../../endpoints/user';\nimport { UserContext } from '../../App';\n\nconst FollowSection = () => {\n  // Reads current connected user from Context\n  const contextUser = useContext(UserContext);\n  const [followingTabActive, setFollowingTabActive] = useState(true);\n  const [followersTabActive, setFollowersTabActive] = useState(false);\n  const [following, setFollowing] = useState([]);\n  const [followers, setFollowers] = useState([]); // Loads followed users from database\n\n  const loadFollowing = useCallback(async () => {\n    var _contextUser$user;\n\n    const data = await userEndpoints.getFollowing((_contextUser$user = contextUser.user) === null || _contextUser$user === void 0 ? void 0 : _contextUser$user._id);\n    data && setFollowing(data);\n  }, [contextUser.user]); // Loads followers from database\n\n  const loadFollowers = useCallback(async () => {\n    var _contextUser$user2;\n\n    const data = await userEndpoints.getFollowers((_contextUser$user2 = contextUser.user) === null || _contextUser$user2 === void 0 ? void 0 : _contextUser$user2._id);\n    data && setFollowers(data);\n  }, [contextUser.user]); // Loads followed users and followers after first render\n\n  useEffect(() => {\n    loadFollowing();\n    loadFollowers();\n  }, [contextUser.user, loadFollowing, loadFollowers]);\n\n  const tabFollowingClick = () => {\n    if (!followingTabActive) {\n      setFollowingTabActive(true);\n      setFollowersTabActive(false);\n    }\n  };\n\n  const tabFollowersClick = () => {\n    if (!followersTabActive) {\n      setFollowersTabActive(true);\n      setFollowingTabActive(false);\n    }\n  };\n\n  const handleUnfollow = (event, clickedUser) => {\n    const updateFollowing = async () => {\n      const {\n        user: currentUser\n      } = contextUser;\n      const followingModified = currentUser.following.filter(el => el.user !== clickedUser._id);\n      const modifiedUser = { ...currentUser,\n        following: followingModified\n      }; // Modify user in context\n\n      await contextUser.setUser(modifiedUser); // Modify list of followed users in database\n\n      await userEndpoints.update(modifiedUser); // Loads followed users\n\n      loadFollowing();\n    };\n\n    const updateFollowers = async () => {\n      const followersModified = clickedUser.followers.filter(el => el.user !== clickedUser._id);\n      const modifiedUser = { ...clickedUser,\n        following: followersModified\n      }; // Modify list of followers in database\n\n      await userEndpoints.update(modifiedUser);\n    };\n\n    updateFollowing();\n    updateFollowers();\n  };\n\n  const handleFollow = async (event, clickedUser) => {\n    const updateFollowing = async () => {\n      const contextUserCopy = { ...contextUser.user\n      };\n      contextUserCopy.following.push({\n        user: clickedUser._id\n      }); // Modify user in context\n\n      await contextUser.setUser(contextUserCopy); // Modify list of followed users in database\n\n      await userEndpoints.update(contextUserCopy); // Loads followed users\n\n      loadFollowing();\n    };\n\n    const updateFollowers = async () => {\n      const clickedUserCopy = { ...clickedUser\n      };\n      clickedUserCopy.followers.push({\n        user: contextUser.user._id\n      }); // Modify list of followers in database\n\n      await userEndpoints.update(clickedUserCopy); // Loads followed users\n\n      loadFollowing();\n    };\n\n    await updateFollowing();\n    await updateFollowers();\n  };\n\n  const followingList = following.map(data => {\n    var _user$profileImage;\n\n    const {\n      user\n    } = data;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: user._id,\n      className: styles.targetWrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ProfileCard, {\n      description: user.description,\n      name: user.name,\n      surname: user.surname,\n      id: user._id,\n      pictureUrl: (_user$profileImage = user.profileImage) === null || _user$profileImage === void 0 ? void 0 : _user$profileImage.url,\n      onClick: e => handleUnfollow(e, user),\n      textButton: \"Unfollow\",\n      colorButton: \"red\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }));\n  });\n  const followersList = followers.map(data => {\n    var _contextUser$user3, _follower$profileImag2;\n\n    const {\n      user: follower\n    } = data;\n    const usersFollowing = (_contextUser$user3 = contextUser.user) === null || _contextUser$user3 === void 0 ? void 0 : _contextUser$user3.following;\n    const allUserIds = usersFollowing === null || usersFollowing === void 0 ? void 0 : usersFollowing.map(element => element.user);\n    const isFollowing = allUserIds === null || allUserIds === void 0 ? void 0 : allUserIds.includes(follower._id);\n\n    if (isFollowing) {\n      var _follower$profileImag;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: follower._id,\n        className: styles.targetWrapper,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ProfileCard, {\n        description: follower.description,\n        name: follower.name,\n        surname: follower.surname,\n        pictureUrl: (_follower$profileImag = follower.profileImage) === null || _follower$profileImag === void 0 ? void 0 : _follower$profileImag.url,\n        id: follower._id,\n        onClick: e => handleUnfollow(e, follower),\n        textButton: \"Unfollow\",\n        colorButton: \"red\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: follower._id,\n      className: styles.targetWrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ProfileCard, {\n      description: follower.description,\n      name: follower.name,\n      surname: follower.surname,\n      pictureUrl: (_follower$profileImag2 = follower.profileImage) === null || _follower$profileImag2 === void 0 ? void 0 : _follower$profileImag2.url,\n      id: follower._id,\n      onClick: e => handleFollow(e, follower),\n      textButton: \"Follow\",\n      colorButton: \"blue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }\n    }));\n  });\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: styles.followSection,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: tabFollowingClick,\n    className: followingTabActive ? styles.activeTab : styles.notActiveTab,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, \"Following\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: tabFollowersClick,\n    className: followersTabActive ? styles.activeTab : styles.notActiveTab,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }, \"Followers\")), followingTabActive && followingList, followersTabActive && followersList);\n};\n\nexport default FollowSection;","map":{"version":3,"sources":["/Users/fjpu/Code/frontend-postApp/src/containers/Home/FollowSection/FollowSection.component.tsx"],"names":["React","useState","useEffect","useContext","useCallback","ProfileCard","styles","userEndpoints","UserContext","FollowSection","contextUser","followingTabActive","setFollowingTabActive","followersTabActive","setFollowersTabActive","following","setFollowing","followers","setFollowers","loadFollowing","data","getFollowing","user","_id","loadFollowers","getFollowers","tabFollowingClick","tabFollowersClick","handleUnfollow","event","clickedUser","updateFollowing","currentUser","followingModified","filter","el","modifiedUser","setUser","update","updateFollowers","followersModified","handleFollow","contextUserCopy","push","clickedUserCopy","followingList","map","targetWrapper","description","name","surname","profileImage","url","e","followersList","follower","usersFollowing","allUserIds","element","isFollowing","includes","followSection","tabList","activeTab","notActiveTab"],"mappings":"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","sourcesContent":["import React, {\n  useState, useEffect, useContext, useCallback,\n} from 'react';\nimport ProfileCard from '../../../components/ProfileCard';\nimport styles from './FollowSection.module.scss';\nimport * as userEndpoints from '../../../endpoints/user';\nimport { User } from '../../../interfaces';\nimport { UserContext } from '../../App';\n\nconst FollowSection = () => {\n  // Reads current connected user from Context\n  const contextUser = useContext(UserContext);\n\n  const [followingTabActive, setFollowingTabActive] = useState(true);\n  const [followersTabActive, setFollowersTabActive] = useState(false);\n  const [following, setFollowing] = useState<{ user: User }[]>([]);\n  const [followers, setFollowers] = useState<{ user: User }[]>([]);\n\n  // Loads followed users from database\n  const loadFollowing = useCallback(async () => {\n    const data = await userEndpoints.getFollowing(contextUser.user?._id!);\n    data && setFollowing(data);\n  },\n    [contextUser.user]);\n\n  // Loads followers from database\n  const loadFollowers = useCallback(async () => {\n    const data = await userEndpoints.getFollowers(contextUser.user?._id!);\n    data && setFollowers(data);\n  },\n    [contextUser.user]);\n\n  // Loads followed users and followers after first render\n  useEffect(() => {\n    loadFollowing();\n    loadFollowers();\n  }, [contextUser.user, loadFollowing, loadFollowers]);\n\n  const tabFollowingClick = () => {\n    if (!followingTabActive) {\n      setFollowingTabActive(true);\n      setFollowersTabActive(false);\n    }\n  };\n\n  const tabFollowersClick = () => {\n    if (!followersTabActive) {\n      setFollowersTabActive(true);\n      setFollowingTabActive(false);\n    }\n  };\n\n  const handleUnfollow = (event: React.MouseEvent<HTMLButtonElement>, clickedUser: User) => {\n    const updateFollowing = async () => {\n      const { user: currentUser } = contextUser;\n      const followingModified = currentUser!.following!\n        .filter((el: { user: string }) => el.user !== clickedUser._id);\n      const modifiedUser: User = { ...currentUser!, following: followingModified };\n      // Modify user in context\n      await contextUser.setUser(modifiedUser);\n      // Modify list of followed users in database\n      await userEndpoints.update(modifiedUser);\n      // Loads followed users\n      loadFollowing();\n    };\n\n    const updateFollowers = async () => {\n      const followersModified = clickedUser.followers!\n        .filter((el: { user: string }) => el.user !== clickedUser._id);\n      const modifiedUser: User = { ...clickedUser!, following: followersModified };\n      // Modify list of followers in database\n      await userEndpoints.update(modifiedUser);\n    };\n    updateFollowing();\n    updateFollowers();\n  };\n\n  const handleFollow = async (event: React.MouseEvent<HTMLButtonElement>, clickedUser: User) => {\n    const updateFollowing = async () => {\n      const contextUserCopy: User = { ...contextUser!.user! };\n      contextUserCopy.following!.push({ user: clickedUser._id! });\n      // Modify user in context\n      await contextUser.setUser(contextUserCopy);\n      // Modify list of followed users in database\n      await userEndpoints.update(contextUserCopy);\n      // Loads followed users\n      loadFollowing();\n    };\n    const updateFollowers = async () => {\n      const clickedUserCopy: User = { ...clickedUser };\n      clickedUserCopy.followers!.push({ user: contextUser!.user!._id! });\n      // Modify list of followers in database\n      await userEndpoints.update(clickedUserCopy);\n      // Loads followed users\n      loadFollowing();\n    };\n    await updateFollowing();\n    await updateFollowers();\n  };\n\n  const followingList = following.map((data) => {\n    const { user } = data;\n    return (\n      <div\n        key={user._id}\n        className={styles.targetWrapper}\n      >\n        <ProfileCard\n          description={user.description}\n          name={user.name}\n          surname={user.surname}\n          id={user._id!}\n          pictureUrl={user.profileImage?.url}\n          onClick={(e) => handleUnfollow(e, user)}\n          textButton=\"Unfollow\"\n          colorButton=\"red\"\n        />\n      </div>\n    );\n  });\n\n  const followersList = followers.map((data) => {\n    const { user: follower } = data;\n    const usersFollowing = contextUser.user?.following;\n    const allUserIds = usersFollowing?.map((element: { user: string }) => element.user);\n    const isFollowing = allUserIds?.includes(follower._id!);\n    if (isFollowing) {\n      return (\n        <div\n          key={follower._id}\n          className={styles.targetWrapper}\n        >\n          <ProfileCard\n            description={follower.description}\n            name={follower.name}\n            surname={follower.surname}\n            pictureUrl={follower.profileImage?.url}\n            id={follower._id!}\n            onClick={(e) => handleUnfollow(e, follower)}\n            textButton=\"Unfollow\"\n            colorButton=\"red\"\n          />\n        </div>\n      );\n    }\n    return (\n      <div\n        key={follower._id}\n        className={styles.targetWrapper}\n      >\n        <ProfileCard\n          description={follower.description}\n          name={follower.name}\n          surname={follower.surname}\n          pictureUrl={follower.profileImage?.url}\n          id={follower._id!}\n          onClick={(e) => handleFollow(e, follower)}\n          textButton=\"Follow\"\n          colorButton=\"blue\"\n        />\n      </div>\n    );\n  });\n\n  return (\n    <section className={styles.followSection}>\n      <div className={styles.tabList}>\n        <button\n          onClick={tabFollowingClick}\n          className={followingTabActive ? styles.activeTab : styles.notActiveTab}\n        >\n          Following\n        </button>\n        <button\n          onClick={tabFollowersClick}\n          className={followersTabActive ? styles.activeTab : styles.notActiveTab}\n        >\n          Followers\n        </button>\n      </div>\n      {followingTabActive && followingList}\n      {followersTabActive && followersList}\n    </section>\n  );\n};\n\nexport default FollowSection;\n"]},"metadata":{},"sourceType":"module"}