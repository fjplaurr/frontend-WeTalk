{"ast":null,"code":"var _jsxFileName = \"/Users/fjpu/Code/frontend-postApp/src/containers/Login/Signup/Signup.component.tsx\";\nimport React, { useContext, useReducer } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport TextInput from '../../../components/TextInput';\nimport UserContext from '../../../helpers/context';\nimport styles from './Signup.module.scss';\nimport * as authEndpoints from '../../../endpoints/auth';\nimport Button from '../../../components/Button';\n\nconst Signup = () => {\n  // React-context to access current connected user\n  const contextUser = useContext(UserContext); // Signup state\n\n  const initialState = {\n    signupName: '',\n    signupSurname: '',\n    signupEmail: '',\n    signupPassword: ''\n  }; // React-router history\n\n  const history = useHistory();\n\n  const reducer = (signupState, action) => {\n    switch (action.type) {\n      case 'supName':\n        return { ...signupState,\n          signupName: action.payload\n        };\n\n      case 'supSurname':\n        return { ...signupState,\n          signupSurname: action.payload\n        };\n\n      case 'supEmail':\n        return { ...signupState,\n          signupEmail: action.payload\n        };\n\n      case 'supPassword':\n        return { ...signupState,\n          signupPassword: action.payload\n        };\n\n      default:\n        return signupState;\n    }\n  };\n\n  const [signupState, dispatch] = useReducer(reducer, initialState); // Signup email change handler\n\n  const onSignupStateHandler = (e, SignupActionType) => {\n    dispatch({\n      type: SignupActionType,\n      payload: e.currentTarget.value\n    });\n  }; // Function triggered when submiting sign up\n\n\n  const onSignupSubmit = async event => {\n    event.preventDefault();\n    const newUser = {\n      email: signupState.signupEmail,\n      password: signupState.signupPassword,\n      name: signupState.signupName,\n      surname: signupState.signupSurname\n    };\n\n    try {\n      const res = await authEndpoints.signup(newUser);\n\n      if (res) {\n        // Sets current user in context\n        await contextUser.setUser(res.user); // Pushes to home screen\n\n        history.push('./home');\n      }\n    } catch (err) {\n      history.push('./notfound');\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.signupContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.titleWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, \"Don't have an account?\")), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSignupSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.inputWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextInput, {\n    onChange: e => onSignupStateHandler(e, 'supName'),\n    type: \"text\",\n    placeholder: \"Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.inputWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextInput, {\n    onChange: e => onSignupStateHandler(e, 'supSurname'),\n    type: \"text\",\n    placeholder: \"Surname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.inputWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextInput, {\n    onChange: e => onSignupStateHandler(e, 'supEmail'),\n    type: \"email\",\n    placeholder: \"Email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.inputWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextInput, {\n    onChange: e => onSignupStateHandler(e, 'supPassword'),\n    type: \"password\",\n    placeholder: \"Password\",\n    minLength: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    backgroundFull: true,\n    text: \"Join\",\n    color: \"blue\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default Signup;","map":{"version":3,"sources":["/Users/fjpu/Code/frontend-postApp/src/containers/Login/Signup/Signup.component.tsx"],"names":["React","useContext","useReducer","useHistory","TextInput","UserContext","styles","authEndpoints","Button","Signup","contextUser","initialState","signupName","signupSurname","signupEmail","signupPassword","history","reducer","signupState","action","type","payload","dispatch","onSignupStateHandler","e","SignupActionType","currentTarget","value","onSignupSubmit","event","preventDefault","newUser","email","password","name","surname","res","signup","setUser","user","push","err","signupContainer","titleWrapper","title","inputWrapper"],"mappings":"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","sourcesContent":["import React, {\n  useState, useContext, useEffect, useReducer,\n} from 'react';\nimport { useHistory } from 'react-router-dom';\nimport TextInput from '../../../components/TextInput';\nimport { User } from '../../../interfaces';\nimport UserContext from '../../../helpers/context';\nimport styles from './Signup.module.scss';\nimport * as authEndpoints from '../../../endpoints/auth';\nimport Button from '../../../components/Button';\n\nconst Signup = () => {\n  // React-context to access current connected user\n  const contextUser = useContext(UserContext);\n\n  // Signup state\n  const initialState = {\n    signupName: '',\n    signupSurname: '',\n    signupEmail: '',\n    signupPassword: '',\n  };\n\n  // React-router history\n  const history = useHistory();\n\n  type SignupActionType = 'supName' | 'supSurname' | 'supEmail' | 'supPassword'\n  type SignupAction = { type: SignupActionType; payload: string };\n\n  const reducer = (signupState: typeof initialState, action: SignupAction) => {\n    switch (action.type) {\n      case 'supName':\n        return { ...signupState, signupName: action.payload };\n      case 'supSurname':\n        return { ...signupState, signupSurname: action.payload };\n      case 'supEmail':\n        return { ...signupState, signupEmail: action.payload };\n      case 'supPassword':\n        return { ...signupState, signupPassword: action.payload };\n      default:\n        return signupState;\n    }\n  };\n  const [signupState, dispatch] = useReducer(reducer, initialState);\n\n  // Signup email change handler\n  const onSignupStateHandler = (e: React.ChangeEvent<HTMLInputElement>, SignupActionType: SignupActionType) => {\n    dispatch({ type: SignupActionType, payload: e.currentTarget.value });\n  };\n\n  // Function triggered when submiting sign up\n  const onSignupSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    const newUser: User = {\n      email: signupState.signupEmail,\n      password: signupState.signupPassword,\n      name: signupState.signupName,\n      surname: signupState.signupSurname,\n    };\n    try {\n      const res: { user: User, token: string } = await authEndpoints.signup(newUser);\n      if (res) {\n        // Sets current user in context\n        await contextUser.setUser(res.user);\n        // Pushes to home screen\n        history.push('./home');\n      }\n    } catch (err) {\n      history.push('./notfound');\n    }\n  };\n\n  return (\n    <div className={styles.signupContainer}>\n      <div className={styles.titleWrapper}>\n        <h1 className={styles.title}>Don&apos;t have an account?</h1>\n      </div>\n      <form onSubmit={onSignupSubmit}>\n        <div className={styles.inputWrapper}>\n          <TextInput onChange={(e) => onSignupStateHandler(e, 'supName')} type=\"text\" placeholder=\"Name\" />\n        </div>\n        <div className={styles.inputWrapper}>\n          <TextInput onChange={(e) => onSignupStateHandler(e, 'supSurname')} type=\"text\" placeholder=\"Surname\" />\n        </div>\n        <div className={styles.inputWrapper}>\n          <TextInput onChange={(e) => onSignupStateHandler(e, 'supEmail')} type=\"email\" placeholder=\"Email\" />\n        </div>\n        <div className={styles.inputWrapper}>\n          <TextInput\n            onChange={(e) => onSignupStateHandler(e, 'supPassword')}\n            type=\"password\"\n            placeholder=\"Password\"\n            minLength={6}\n          />\n        </div>\n        <Button\n          backgroundFull\n          text=\"Join\"\n          color=\"blue\"\n          type=\"submit\"\n        />\n      </form>\n    </div>\n  );\n};\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}