{"ast":null,"code":"var _jsxFileName = \"/Users/fjpu/Code/frontend-postApp/src/containers/Home/FollowSection/FollowSection.component.tsx\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport ProfileTarget from '../../../components/ProfileTarget';\nimport styles from './FollowSection.module.scss';\nimport * as userEndpoints from '../../../endpoints/user';\n\nconst FollowSection = () => {\n  // Reads current connected user from Context\n  const UserContext = React.createContext({\n    user: undefined,\n    setUser: () => {}\n  });\n  const contextUser = useContext(UserContext);\n  const [followingTabActive, setFollowingTabActive] = useState(true);\n  const [followersTabActive, setFollowersTabActive] = useState(false);\n  const [following, setFollowing] = useState([]);\n  const [followers, setFollowers] = useState([]); // Loads followed users from database\n\n  async function loadFollowing() {\n    const data = await userEndpoints.getFollowing(contextUser.user._id);\n    data && setFollowing(data);\n  } // Loads followers from database\n\n\n  async function loadFollowers() {\n    const data = await userEndpoints.getFollowers(contextUser.user._id);\n    data && setFollowers(data);\n  } // Loads followed users and followers after first render\n\n\n  useEffect(() => {\n    loadFollowing();\n    loadFollowers();\n  }, []);\n\n  const tabFollowingClick = () => {\n    if (!followingTabActive) {\n      setFollowingTabActive(true);\n      setFollowersTabActive(false);\n    }\n  };\n\n  const tabFollowersClick = () => {\n    if (!followersTabActive) {\n      setFollowersTabActive(true);\n      setFollowingTabActive(false);\n    }\n  };\n\n  const unfollowUser = async (event, clickedUser) => {\n    const user = { ...contextUser.user\n    };\n    const followingModified = user.following.filter(element => element.user !== clickedUser._id);\n    const modifiedUser = { ...user,\n      following: followingModified\n    }; // Modify user in context\n\n    await contextUser.setUser(modifiedUser); // Modify list of followed users in database\n\n    const res = await userEndpoints.update(modifiedUser); // If the user has been successfully modified, loads followed users\n\n    user && loadFollowing();\n  };\n\n  const followingList = following.map(data => {\n    var _data$user$profileIma;\n\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      key: data.user._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ProfileTarget, {\n      description: data.user.description,\n      name: data.user.name,\n      surname: data.user.surname,\n      pictureUrl: (_data$user$profileIma = data.user.profileImage) === null || _data$user$profileIma === void 0 ? void 0 : _data$user$profileIma.url,\n      onClick: e => unfollowUser(e, data.user),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }));\n  });\n  const followersList = followers.map(data => {\n    var _data$user$profileIma2;\n\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      key: data.user._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ProfileTarget, {\n      description: data.user.description,\n      name: data.user.name,\n      surname: data.user.surname,\n      pictureUrl: (_data$user$profileIma2 = data.user.profileImage) === null || _data$user$profileIma2 === void 0 ? void 0 : _data$user$profileIma2.url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }));\n  });\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: styles.followSection,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: tabFollowingClick,\n    className: followingTabActive ? styles.activeTab : styles.notActiveTab,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, \"Following\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: tabFollowersClick,\n    className: followersTabActive ? styles.activeTab : styles.notActiveTab,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, \"Followers\")), followingTabActive && followingList, followersTabActive && followersList);\n};\n\nexport default FollowSection;","map":{"version":3,"sources":["/Users/fjpu/Code/frontend-postApp/src/containers/Home/FollowSection/FollowSection.component.tsx"],"names":["React","useState","useEffect","useContext","ProfileTarget","styles","userEndpoints","FollowSection","UserContext","createContext","user","undefined","setUser","contextUser","followingTabActive","setFollowingTabActive","followersTabActive","setFollowersTabActive","following","setFollowing","followers","setFollowers","loadFollowing","data","getFollowing","_id","loadFollowers","getFollowers","tabFollowingClick","tabFollowersClick","unfollowUser","event","clickedUser","followingModified","filter","element","modifiedUser","res","update","followingList","map","description","name","surname","profileImage","url","e","followersList","followSection","tabList","activeTab","notActiveTab"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport ProfileTarget from '../../../components/ProfileTarget';\nimport styles from './FollowSection.module.scss';\nimport * as userEndpoints from '../../../endpoints/user';\nimport { User, Context } from '../../../interfaces';\n\nconst FollowSection = () => {\n  // Reads current connected user from Context\n  const UserContext = React.createContext<Context>({\n    user: undefined,\n    setUser: () => { },\n  });\n  const contextUser = useContext(UserContext);\n\n  const [followingTabActive, setFollowingTabActive] = useState(true);\n  const [followersTabActive, setFollowersTabActive] = useState(false);\n  const [following, setFollowing] = useState([]);\n  const [followers, setFollowers] = useState([]);\n\n  // Loads followed users from database\n  async function loadFollowing() {\n    const data = await userEndpoints.getFollowing(contextUser.user!._id!);\n    data && setFollowing(data);\n  }\n\n  // Loads followers from database\n  async function loadFollowers() {\n    const data = await userEndpoints.getFollowers(contextUser.user!._id!);\n    data && setFollowers(data);\n  }\n\n  // Loads followed users and followers after first render\n  useEffect(() => {\n    loadFollowing();\n    loadFollowers();\n  }, []);\n\n  const tabFollowingClick = () => {\n    if (!followingTabActive) {\n      setFollowingTabActive(true);\n      setFollowersTabActive(false);\n    }\n  };\n\n  const tabFollowersClick = () => {\n    if (!followersTabActive) {\n      setFollowersTabActive(true);\n      setFollowingTabActive(false);\n    }\n  };\n\n  const unfollowUser = async (event: React.MouseEvent<HTMLButtonElement>, clickedUser: User) => {\n    const user: User = { ...contextUser!.user! };\n    const followingModified = user.following!.filter((element) => element.user !== clickedUser._id);\n    const modifiedUser: User = { ...user, following: followingModified };\n    // Modify user in context\n    await contextUser.setUser(modifiedUser);\n    // Modify list of followed users in database\n    const res = await userEndpoints.update(modifiedUser);\n    // If the user has been successfully modified, loads followed users\n    user && loadFollowing();\n  };\n\n  const followingList = following.map((data: { user: User }) => {\n    return (\n      <React.Fragment key={data.user._id}>\n        <ProfileTarget\n          description={data.user.description}\n          name={data.user.name}\n          surname={data.user.surname}\n          pictureUrl={data.user.profileImage?.url}\n          onClick={(e) => unfollowUser(e, data.user)}\n        />\n      </React.Fragment>\n    );\n  });\n\n  const followersList = followers.map((data: { user: User }) => {\n    return (\n      <React.Fragment key={data.user._id}>\n        <ProfileTarget\n          description={data.user.description}\n          name={data.user.name}\n          surname={data.user.surname}\n          pictureUrl={data.user.profileImage?.url}\n        />\n      </React.Fragment>\n    );\n  });\n\n  return (\n    <section className={styles.followSection}>\n      <div className={styles.tabList}>\n        <button\n          onClick={tabFollowingClick}\n          className={followingTabActive ? styles.activeTab : styles.notActiveTab}\n        >\n          Following\n        </button>\n        <button\n          onClick={tabFollowersClick}\n          className={followersTabActive ? styles.activeTab : styles.notActiveTab}\n        >\n          Followers\n        </button>\n      </div>\n      {followingTabActive && followingList}\n      {followersTabActive && followersList}\n    </section>\n  );\n};\n\nexport default FollowSection;\n"]},"metadata":{},"sourceType":"module"}