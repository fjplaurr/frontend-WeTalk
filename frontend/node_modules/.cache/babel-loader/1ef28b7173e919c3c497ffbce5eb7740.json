{"ast":null,"code":"var _jsxFileName = \"/Users/fjpu/Code/frontend-postApp/src/containers/Home/FollowSection/FollowSection.component.tsx\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport ProfileTarget from '../../../components/ProfileTarget';\nimport styles from './FollowSection.module.scss';\nimport * as userEndpoints from '../../../endpoints/user';\nimport { UserContext } from '../../App';\n\nconst FollowSection = () => {\n  // Reads current connected user from Context\n  const contextUser = useContext(UserContext);\n  const [followingTabActive, setFollowingTabActive] = useState(true);\n  const [followersTabActive, setFollowersTabActive] = useState(false);\n  const [following, setFollowing] = useState([]);\n  const [followers, setFollowers] = useState([]); // Loads followed users from database\n\n  async function loadFollowing() {\n    var _contextUser$user;\n\n    const data = await userEndpoints.getFollowing((_contextUser$user = contextUser.user) === null || _contextUser$user === void 0 ? void 0 : _contextUser$user._id);\n    console.log('data is');\n    console.log(data);\n    data && setFollowing(data);\n  } // Loads followers from database\n\n\n  async function loadFollowers() {\n    var _contextUser$user2;\n\n    const data = await userEndpoints.getFollowers((_contextUser$user2 = contextUser.user) === null || _contextUser$user2 === void 0 ? void 0 : _contextUser$user2._id);\n    data && setFollowers(data);\n  } // Loads followed users and followers after first render\n\n\n  useEffect(() => {\n    loadFollowing();\n    loadFollowers();\n  }, [contextUser.user]);\n\n  const tabFollowingClick = () => {\n    if (!followingTabActive) {\n      setFollowingTabActive(true);\n      setFollowersTabActive(false);\n    }\n  };\n\n  const tabFollowersClick = () => {\n    if (!followersTabActive) {\n      setFollowersTabActive(true);\n      setFollowingTabActive(false);\n    }\n  };\n\n  const unfollowUser = async (event, clickedUser) => {\n    const followingModified = contextUser.user.following.filter(element => element.user !== clickedUser._id);\n    const modifiedUser = { ...contextUser.user,\n      following: followingModified\n    }; // Modify user in context\n\n    await contextUser.setUser(modifiedUser); // Modify list of followed users in database\n\n    console.log('modifed user is');\n    console.log(modifiedUser);\n    await userEndpoints.update(modifiedUser); // Loads followed users\n\n    loadFollowing();\n  };\n\n  const followUser = async (event, clickedUser) => {\n    const contextUserCopy = { ...contextUser.user\n    };\n    contextUserCopy.following.push({\n      user: clickedUser._id\n    }); // Modify user in context\n\n    await contextUser.setUser(contextUserCopy); // Modify list of followed users in database\n\n    await userEndpoints.update(contextUserCopy); // Loads followed users\n\n    loadFollowing();\n  };\n\n  useEffect(() => {\n    console.log('following');\n    console.log(following);\n  }, [following]);\n  const followingList = following.map(data => {\n    var _user$profileImage;\n\n    const {\n      user\n    } = data;\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      key: user._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ProfileTarget, {\n      description: user.description,\n      name: user.name,\n      surname: user.surname,\n      pictureUrl: (_user$profileImage = user.profileImage) === null || _user$profileImage === void 0 ? void 0 : _user$profileImage.url,\n      onClick: e => unfollowUser(e, user),\n      textButton: \"Unfollow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }));\n  });\n  const followersList = followers.map(data => {\n    var _contextUser$user3, _user$profileImage3;\n\n    const {\n      user\n    } = data;\n    const usersFollowing = (_contextUser$user3 = contextUser.user) === null || _contextUser$user3 === void 0 ? void 0 : _contextUser$user3.following;\n    const isFollowing = usersFollowing === null || usersFollowing === void 0 ? void 0 : usersFollowing.includes({\n      user: user._id\n    });\n\n    if (isFollowing) {\n      var _user$profileImage2;\n\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        key: user._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ProfileTarget, {\n        description: user.description,\n        name: user.name,\n        surname: user.surname,\n        pictureUrl: (_user$profileImage2 = user.profileImage) === null || _user$profileImage2 === void 0 ? void 0 : _user$profileImage2.url,\n        onClick: e => unfollowUser(e, user),\n        textButton: \"Unfollow\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      key: user._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ProfileTarget, {\n      description: user.description,\n      name: user.name,\n      surname: user.surname,\n      pictureUrl: (_user$profileImage3 = user.profileImage) === null || _user$profileImage3 === void 0 ? void 0 : _user$profileImage3.url,\n      onClick: e => followUser(e, user),\n      textButton: \"Follow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }\n    }));\n  });\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: styles.followSection,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: tabFollowingClick,\n    className: followingTabActive ? styles.activeTab : styles.notActiveTab,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, \"Following\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: tabFollowersClick,\n    className: followersTabActive ? styles.activeTab : styles.notActiveTab,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, \"Followers\")), followingTabActive && followingList, followersTabActive && followersList);\n};\n\nexport default FollowSection;","map":{"version":3,"sources":["/Users/fjpu/Code/frontend-postApp/src/containers/Home/FollowSection/FollowSection.component.tsx"],"names":["React","useState","useEffect","useContext","ProfileTarget","styles","userEndpoints","UserContext","FollowSection","contextUser","followingTabActive","setFollowingTabActive","followersTabActive","setFollowersTabActive","following","setFollowing","followers","setFollowers","loadFollowing","data","getFollowing","user","_id","console","log","loadFollowers","getFollowers","tabFollowingClick","tabFollowersClick","unfollowUser","event","clickedUser","followingModified","filter","element","modifiedUser","setUser","update","followUser","contextUserCopy","push","followingList","map","description","name","surname","profileImage","url","e","followersList","usersFollowing","isFollowing","includes","followSection","tabList","activeTab","notActiveTab"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,OAAOC,aAAP,MAA0B,mCAA1B;AACA,OAAOC,MAAP,MAAmB,6BAAnB;AACA,OAAO,KAAKC,aAAZ,MAA+B,yBAA/B;AAEA,SAASC,WAAT,QAA4B,WAA5B;;AAEA,MAAMC,aAAa,GAAG,MAAM;AAC1B;AACA,QAAMC,WAAW,GAAGN,UAAU,CAACI,WAAD,CAA9B;AAEA,QAAM,CAACG,kBAAD,EAAqBC,qBAArB,IAA8CV,QAAQ,CAAC,IAAD,CAA5D;AACA,QAAM,CAACW,kBAAD,EAAqBC,qBAArB,IAA8CZ,QAAQ,CAAC,KAAD,CAA5D;AACA,QAAM,CAACa,SAAD,EAAYC,YAAZ,IAA4Bd,QAAQ,CAAmB,EAAnB,CAA1C;AACA,QAAM,CAACe,SAAD,EAAYC,YAAZ,IAA4BhB,QAAQ,CAAmB,EAAnB,CAA1C,CAP0B,CAS1B;;AACA,iBAAeiB,aAAf,GAA+B;AAAA;;AAC7B,UAAMC,IAAI,GAAG,MAAMb,aAAa,CAACc,YAAd,sBAA2BX,WAAW,CAACY,IAAvC,sDAA2B,kBAAkBC,GAA7C,CAAnB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYL,IAAZ;AACAA,IAAAA,IAAI,IAAIJ,YAAY,CAACI,IAAD,CAApB;AACD,GAfyB,CAiB1B;;;AACA,iBAAeM,aAAf,GAA+B;AAAA;;AAC7B,UAAMN,IAAI,GAAG,MAAMb,aAAa,CAACoB,YAAd,uBAA2BjB,WAAW,CAACY,IAAvC,uDAA2B,mBAAkBC,GAA7C,CAAnB;AACAH,IAAAA,IAAI,IAAIF,YAAY,CAACE,IAAD,CAApB;AACD,GArByB,CAuB1B;;;AACAjB,EAAAA,SAAS,CAAC,MAAM;AACdgB,IAAAA,aAAa;AACbO,IAAAA,aAAa;AACd,GAHQ,EAGN,CAAChB,WAAW,CAACY,IAAb,CAHM,CAAT;;AAKA,QAAMM,iBAAiB,GAAG,MAAM;AAC9B,QAAI,CAACjB,kBAAL,EAAyB;AACvBC,MAAAA,qBAAqB,CAAC,IAAD,CAArB;AACAE,MAAAA,qBAAqB,CAAC,KAAD,CAArB;AACD;AACF,GALD;;AAOA,QAAMe,iBAAiB,GAAG,MAAM;AAC9B,QAAI,CAAChB,kBAAL,EAAyB;AACvBC,MAAAA,qBAAqB,CAAC,IAAD,CAArB;AACAF,MAAAA,qBAAqB,CAAC,KAAD,CAArB;AACD;AACF,GALD;;AAOA,QAAMkB,YAAY,GAAG,OAAOC,KAAP,EAAmDC,WAAnD,KAAyE;AAC5F,UAAMC,iBAAiB,GAAGvB,WAAW,CAACY,IAAZ,CAAkBP,SAAlB,CAA6BmB,MAA7B,CAAqCC,OAAD,IAAaA,OAAO,CAACb,IAAR,KAAiBU,WAAW,CAACT,GAA9E,CAA1B;AACA,UAAMa,YAAkB,GAAG,EAAE,GAAG1B,WAAW,CAACY,IAAjB;AAAwBP,MAAAA,SAAS,EAAEkB;AAAnC,KAA3B,CAF4F,CAG5F;;AACA,UAAMvB,WAAW,CAAC2B,OAAZ,CAAoBD,YAApB,CAAN,CAJ4F,CAK5F;;AACAZ,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYW,YAAZ;AACA,UAAM7B,aAAa,CAAC+B,MAAd,CAAqBF,YAArB,CAAN,CAR4F,CAS5F;;AACAjB,IAAAA,aAAa;AACd,GAXD;;AAaA,QAAMoB,UAAU,GAAG,OAAOR,KAAP,EAAmDC,WAAnD,KAAyE;AAC1F,UAAMQ,eAAqB,GAAG,EAAE,GAAG9B,WAAW,CAAEY;AAAlB,KAA9B;AACAkB,IAAAA,eAAe,CAACzB,SAAhB,CAA2B0B,IAA3B,CAAgC;AAAEnB,MAAAA,IAAI,EAAEU,WAAW,CAACT;AAApB,KAAhC,EAF0F,CAG1F;;AACA,UAAMb,WAAW,CAAC2B,OAAZ,CAAoBG,eAApB,CAAN,CAJ0F,CAK1F;;AACA,UAAMjC,aAAa,CAAC+B,MAAd,CAAqBE,eAArB,CAAN,CAN0F,CAO1F;;AACArB,IAAAA,aAAa;AACd,GATD;;AAWAhB,EAAAA,SAAS,CAAC,MAAM;AACdqB,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYV,SAAZ;AACD,GAHQ,EAGN,CAACA,SAAD,CAHM,CAAT;AAKA,QAAM2B,aAAa,GAAG3B,SAAS,CAAC4B,GAAV,CAAevB,IAAD,IAAU;AAAA;;AAC5C,UAAM;AAAEE,MAAAA;AAAF,QAAWF,IAAjB;AACA,wBACE,oBAAC,KAAD,CAAO,QAAP;AAAgB,MAAA,GAAG,EAAEE,IAAI,CAACC,GAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,aAAD;AACE,MAAA,WAAW,EAAED,IAAI,CAACsB,WADpB;AAEE,MAAA,IAAI,EAAEtB,IAAI,CAACuB,IAFb;AAGE,MAAA,OAAO,EAAEvB,IAAI,CAACwB,OAHhB;AAIE,MAAA,UAAU,wBAAExB,IAAI,CAACyB,YAAP,uDAAE,mBAAmBC,GAJjC;AAKE,MAAA,OAAO,EAAGC,CAAD,IAAOnB,YAAY,CAACmB,CAAD,EAAI3B,IAAJ,CAL9B;AAME,MAAA,UAAU,EAAC,UANb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AAYD,GAdqB,CAAtB;AAgBA,QAAM4B,aAAa,GAAGjC,SAAS,CAAC0B,GAAV,CAAevB,IAAD,IAAU;AAAA;;AAC5C,UAAM;AAAEE,MAAAA;AAAF,QAAWF,IAAjB;AACA,UAAM+B,cAAc,yBAAGzC,WAAW,CAACY,IAAf,uDAAG,mBAAkBP,SAAzC;AACA,UAAMqC,WAAW,GAAGD,cAAH,aAAGA,cAAH,uBAAGA,cAAc,CAAEE,QAAhB,CAAyB;AAAE/B,MAAAA,IAAI,EAAEA,IAAI,CAACC;AAAb,KAAzB,CAApB;;AACA,QAAI6B,WAAJ,EAAiB;AAAA;;AACf,0BACE,oBAAC,KAAD,CAAO,QAAP;AAAgB,QAAA,GAAG,EAAE9B,IAAI,CAACC,GAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,aAAD;AACE,QAAA,WAAW,EAAED,IAAI,CAACsB,WADpB;AAEE,QAAA,IAAI,EAAEtB,IAAI,CAACuB,IAFb;AAGE,QAAA,OAAO,EAAEvB,IAAI,CAACwB,OAHhB;AAIE,QAAA,UAAU,yBAAExB,IAAI,CAACyB,YAAP,wDAAE,oBAAmBC,GAJjC;AAKE,QAAA,OAAO,EAAGC,CAAD,IAAOnB,YAAY,CAACmB,CAAD,EAAI3B,IAAJ,CAL9B;AAME,QAAA,UAAU,EAAC,UANb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF;AAYD;;AACD,wBACE,oBAAC,KAAD,CAAO,QAAP;AAAgB,MAAA,GAAG,EAAEA,IAAI,CAACC,GAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,aAAD;AACE,MAAA,WAAW,EAAED,IAAI,CAACsB,WADpB;AAEE,MAAA,IAAI,EAAEtB,IAAI,CAACuB,IAFb;AAGE,MAAA,OAAO,EAAEvB,IAAI,CAACwB,OAHhB;AAIE,MAAA,UAAU,yBAAExB,IAAI,CAACyB,YAAP,wDAAE,oBAAmBC,GAJjC;AAKE,MAAA,OAAO,EAAGC,CAAD,IAAOV,UAAU,CAACU,CAAD,EAAI3B,IAAJ,CAL5B;AAME,MAAA,UAAU,EAAC,QANb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AAYD,GA9BqB,CAAtB;AAgCA,sBACE;AAAS,IAAA,SAAS,EAAEhB,MAAM,CAACgD,aAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAEhD,MAAM,CAACiD,OAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,OAAO,EAAE3B,iBADX;AAEE,IAAA,SAAS,EAAEjB,kBAAkB,GAAGL,MAAM,CAACkD,SAAV,GAAsBlD,MAAM,CAACmD,YAF5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAOE;AACE,IAAA,OAAO,EAAE5B,iBADX;AAEE,IAAA,SAAS,EAAEhB,kBAAkB,GAAGP,MAAM,CAACkD,SAAV,GAAsBlD,MAAM,CAACmD,YAF5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAPF,CADF,EAeG9C,kBAAkB,IAAI+B,aAfzB,EAgBG7B,kBAAkB,IAAIqC,aAhBzB,CADF;AAoBD,CA5ID;;AA8IA,eAAezC,aAAf","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport ProfileTarget from '../../../components/ProfileTarget';\nimport styles from './FollowSection.module.scss';\nimport * as userEndpoints from '../../../endpoints/user';\nimport { User } from '../../../interfaces';\nimport { UserContext } from '../../App';\n\nconst FollowSection = () => {\n  // Reads current connected user from Context\n  const contextUser = useContext(UserContext);\n\n  const [followingTabActive, setFollowingTabActive] = useState(true);\n  const [followersTabActive, setFollowersTabActive] = useState(false);\n  const [following, setFollowing] = useState<{ user: User }[]>([]);\n  const [followers, setFollowers] = useState<{ user: User }[]>([]);\n\n  // Loads followed users from database\n  async function loadFollowing() {\n    const data = await userEndpoints.getFollowing(contextUser.user?._id!);\n    console.log('data is')\n    console.log(data)\n    data && setFollowing(data);\n  }\n\n  // Loads followers from database\n  async function loadFollowers() {\n    const data = await userEndpoints.getFollowers(contextUser.user?._id!);\n    data && setFollowers(data);\n  }\n\n  // Loads followed users and followers after first render\n  useEffect(() => {\n    loadFollowing();\n    loadFollowers();\n  }, [contextUser.user]);\n\n  const tabFollowingClick = () => {\n    if (!followingTabActive) {\n      setFollowingTabActive(true);\n      setFollowersTabActive(false);\n    }\n  };\n\n  const tabFollowersClick = () => {\n    if (!followersTabActive) {\n      setFollowersTabActive(true);\n      setFollowingTabActive(false);\n    }\n  };\n\n  const unfollowUser = async (event: React.MouseEvent<HTMLButtonElement>, clickedUser: User) => {\n    const followingModified = contextUser.user!.following!.filter((element) => element.user !== clickedUser._id);\n    const modifiedUser: User = { ...contextUser.user!, following: followingModified };\n    // Modify user in context\n    await contextUser.setUser(modifiedUser);\n    // Modify list of followed users in database\n    console.log('modifed user is');\n    console.log(modifiedUser);\n    await userEndpoints.update(modifiedUser);\n    // Loads followed users\n    loadFollowing();\n  };\n\n  const followUser = async (event: React.MouseEvent<HTMLButtonElement>, clickedUser: User) => {\n    const contextUserCopy: User = { ...contextUser!.user! };\n    contextUserCopy.following!.push({ user: clickedUser._id! });\n    // Modify user in context\n    await contextUser.setUser(contextUserCopy);\n    // Modify list of followed users in database\n    await userEndpoints.update(contextUserCopy);\n    // Loads followed users\n    loadFollowing();\n  };\n\n  useEffect(() => {\n    console.log('following')\n    console.log(following)\n  }, [following])\n\n  const followingList = following.map((data) => {\n    const { user } = data;\n    return (\n      <React.Fragment key={user._id}>\n        <ProfileTarget\n          description={user.description}\n          name={user.name}\n          surname={user.surname}\n          pictureUrl={user.profileImage?.url}\n          onClick={(e) => unfollowUser(e, user)}\n          textButton=\"Unfollow\"\n        />\n      </React.Fragment>\n    );\n  });\n\n  const followersList = followers.map((data) => {\n    const { user } = data;\n    const usersFollowing = contextUser.user?.following;\n    const isFollowing = usersFollowing?.includes({ user: user._id! });\n    if (isFollowing) {\n      return (\n        <React.Fragment key={user._id}>\n          <ProfileTarget\n            description={user.description}\n            name={user.name}\n            surname={user.surname}\n            pictureUrl={user.profileImage?.url}\n            onClick={(e) => unfollowUser(e, user)}\n            textButton=\"Unfollow\"\n          />\n        </React.Fragment>\n      );\n    }\n    return (\n      <React.Fragment key={user._id}>\n        <ProfileTarget\n          description={user.description}\n          name={user.name}\n          surname={user.surname}\n          pictureUrl={user.profileImage?.url}\n          onClick={(e) => followUser(e, user)}\n          textButton=\"Follow\"\n        />\n      </React.Fragment>\n    );\n  });\n\n  return (\n    <section className={styles.followSection}>\n      <div className={styles.tabList}>\n        <button\n          onClick={tabFollowingClick}\n          className={followingTabActive ? styles.activeTab : styles.notActiveTab}\n        >\n          Following\n        </button>\n        <button\n          onClick={tabFollowersClick}\n          className={followersTabActive ? styles.activeTab : styles.notActiveTab}\n        >\n          Followers\n        </button>\n      </div>\n      {followingTabActive && followingList}\n      {followersTabActive && followersList}\n    </section>\n  );\n};\n\nexport default FollowSection;\n"]},"metadata":{},"sourceType":"module"}