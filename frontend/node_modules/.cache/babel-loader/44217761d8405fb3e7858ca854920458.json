{"ast":null,"code":"import { useContext } from 'react';\nimport { UserContext } from '../containers/App';\nimport { loadUser } from '../helpers/localStorage';\nimport * as userEndpoints from '../endpoints/user';\n\nconst useUser = () => {\n  const localStoredUser = loadUser();\n  console.log('localStoredUser');\n  console.log(localStoredUser);\n  const currentUser = useContext(UserContext);\n\n  if (localStoredUser) {\n    const fetchUser = async () => {\n      console.log('fetching user from local store');\n      const res = await userEndpoints.getSingle(localStoredUser.id);\n      await currentUser.setUser(res);\n      return {\n        user: currentUser.user,\n        setUser: currentUser.setUser\n      };\n    };\n\n    fetchUser();\n  }\n\n  return {\n    user: currentUser.user,\n    setUser: currentUser.setUser\n  };\n};\n\nexport default useUser;","map":{"version":3,"sources":["/Users/fjpu/Code/frontend-postApp/src/customHooks/useUser.tsx"],"names":["useContext","UserContext","loadUser","userEndpoints","useUser","localStoredUser","console","log","currentUser","fetchUser","res","getSingle","id","setUser","user"],"mappings":"AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,WAAT,QAA4B,mBAA5B;AACA,SAASC,QAAT,QAAmC,yBAAnC;AACA,OAAO,KAAKC,aAAZ,MAA+B,mBAA/B;;AAEA,MAAMC,OAAO,GAAG,MAAM;AACpB,QAAMC,eAAe,GAAGH,QAAQ,EAAhC;AACAI,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYF,eAAZ;AACA,QAAMG,WAAW,GAAGR,UAAU,CAACC,WAAD,CAA9B;;AACA,MAAII,eAAJ,EAAqB;AACnB,UAAMI,SAAS,GAAG,YAAY;AAC5BH,MAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AACA,YAAMG,GAAG,GAAG,MAAMP,aAAa,CAACQ,SAAd,CAAwBN,eAAe,CAACO,EAAxC,CAAlB;AACA,YAAMJ,WAAW,CAACK,OAAZ,CAAoBH,GAApB,CAAN;AACA,aAAO;AAAEI,QAAAA,IAAI,EAAEN,WAAW,CAACM,IAApB;AAA0BD,QAAAA,OAAO,EAAEL,WAAW,CAACK;AAA/C,OAAP;AACD,KALD;;AAMAJ,IAAAA,SAAS;AACV;;AACD,SAAO;AAAEK,IAAAA,IAAI,EAAEN,WAAW,CAACM,IAApB;AAA0BD,IAAAA,OAAO,EAAEL,WAAW,CAACK;AAA/C,GAAP;AACD,CAfD;;AAiBA,eAAeT,OAAf","sourcesContent":["import { useContext } from 'react';\nimport { UserContext } from '../containers/App';\nimport { loadUser, saveUser } from '../helpers/localStorage';\nimport * as userEndpoints from '../endpoints/user';\n\nconst useUser = () => {\n  const localStoredUser = loadUser();\n  console.log('localStoredUser')\n  console.log(localStoredUser)\n  const currentUser = useContext(UserContext);\n  if (localStoredUser) {\n    const fetchUser = async () => {\n      console.log('fetching user from local store')\n      const res = await userEndpoints.getSingle(localStoredUser.id!);\n      await currentUser.setUser(res);\n      return { user: currentUser.user, setUser: currentUser.setUser };\n    };\n    fetchUser();\n  }\n  return { user: currentUser.user, setUser: currentUser.setUser };\n};\n\nexport default useUser;\n"]},"metadata":{},"sourceType":"module"}